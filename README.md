# スイングトレード練習アプリ

過去の株価データを使って、時間圧縮しながらスイングトレードの練習ができるiPhone向けPWAアプリです。

## 🎯 目的

- スイングトレード初心者が効率的に上達できるよう設計
- リアルタイムより早く多くの経験を積める時間圧縮機能
- 勝率7割達成に向けた成長を可視化

## ✨ 主な機能

### チャート機能
- 日足チャート表示（ローソク足）
- 移動平均線5本（期間カスタマイズ可能）
- 出来高表示
- ロング/ショート（空売り）対応
- 過去データを一日単位で進める再生機能
- 未来のデータは不可視

### 売買機能
- 仮想時間の進行を一時停止して注文入力
- 取引理由をメモとして記録
- 現物取引と信用取引の選択
- 手数料・スリッページを考慮した計算
- ポジションの決済

### セッション機能
- 初期資金100万円でスタート
- 期間は20/40/60日から選択可能
- 出来高が一定以上の銘柄を自動抽出（日本株100銘柄）
- 再生速度の調整（5〜30秒/日）
- セッション途中での保存・再開

### 自動計算される指標
- セッションID（固有の識別子）
- 期間・銘柄
- トレード回数
- 勝率
- 最終資金
- 最大ドローダウン（DD）
- ルール違反回数

### ルール違反チェック
1. **損切りルール違反**: 含み損が-10%を超えても決済しない
2. **ポジションサイズ違反**: 1銘柄に資金の30%以上を投入
3. **同時保有数違反**: 3銘柄以上を同時保有
4. **レバレッジ違反**: レバレッジ2倍以上

### 戦績確認
- ダッシュボードで統計を可視化
- セッション一覧で成績を比較
- 詳細ビューでチャート上に売買マークを表示
- 吹き出しで取引理由を確認

## 🛠 技術スタック

- **フレームワーク**: Next.js 14 (App Router)
- **UI**: React + TypeScript
- **スタイリング**: Tailwind CSS + shadcn/ui
- **チャート**: Lightweight Charts (TradingView製)
- **状態管理**: Zustand
- **データベース**: IndexedDB (Dexie.js)
- **日付処理**: date-fns

## 📦 セットアップ

### 前提条件
- Node.js 18以上
- npm または yarn

### インストール

```bash
# リポジトリをクローン
git clone <repository-url>
cd swing-trader-practice

# 依存パッケージをインストール
npm install

# 開発サーバーを起動
npm run dev
```

ブラウザで http://localhost:3000 を開きます。

### ビルド

```bash
# プロダクションビルド
npm run build

# プロダクションサーバーを起動
npm start
```

## 📱 PWAとして使用

### iPhoneでの使用方法
1. Safariで http://localhost:3000 を開く
2. 共有ボタンをタップ
3. 「ホーム画面に追加」を選択
4. アプリがホーム画面に追加されます

### PWA機能
- オフライン動作
- ネイティブアプリのような操作感
- IndexedDBによるローカルデータ保存

## 📊 データについて

### サンプルデータ
初回起動時に、日本株主要100銘柄の500日分のサンプルデータを自動生成します。

### 実データの使用（今後の拡張）
Stooqなどのサービスから実際の株価データをダウンロードして使用することも可能です。

## 🎮 使い方

### 1. 新規セッション開始
1. トップページで「新規セッション」をクリック
2. 期間（20/40/60日）を選択
3. 再生速度を設定
4. 「セッション開始」をクリック

### 2. トレード実行
1. チャートを確認しながら、再生ボタンで時間を進める
2. 取引したいタイミングで一時停止
3. 右側の注文フォームで買い/売り、現物/信用、株数を入力
4. 取引理由をメモに記入
5. 「注文を実行」をクリック

### 3. ポジション管理
- 保有ポジションは自動的に含み損益を計算
- 決済したいタイミングで「決済」ボタンをクリック

### 4. セッション完了
- 設定した期間が終了すると自動的にセッション完了
- 結果が履歴に保存されます

### 5. 成長の確認
- 履歴ページで過去のセッションを振り返る
- 勝率の推移、損益率などを分析
- 目標の勝率70%を目指す

## 📈 推奨される練習方法

1. **短期間から始める**: 最初は20日セッションで練習
2. **メモを必ず記録**: なぜその取引をしたのか明確に
3. **ルール違反を減らす**: 損切りルールを守る習慣をつける
4. **セッションを重ねる**: 10回以上のセッションで傾向を把握
5. **振り返りを行う**: 履歴から成功・失敗パターンを分析

## 🔧 カスタマイズ

### 移動平均線の期間変更
セッション開始時に5本の移動平均線の期間を変更できます。
デフォルト: 5, 25, 75, 100, 200日線

### ルール違反の閾値変更
`lib/trading/calculator.ts` の `RULE_LIMITS` を編集することで、
ルール違反の基準を変更できます。

### 銘柄リストの変更
`lib/data/stockData.ts` の `JAPANESE_STOCKS` を編集することで、
使用する銘柄を変更できます。

## 🤝 コントリビューション

バグ報告や機能リクエストは Issues でお願いします。
プルリクエストも歓迎します。

## 📄 ライセンス

MIT

## 🙏 謝辞

- チャートライブラリ: TradingView Lightweight Charts
- アイコン: Lucide Icons
